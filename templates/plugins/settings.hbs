<style>
	.plugin-content[plugin="settings"] tr td:nth-child(1) {
		text-align: right;
	}
	.plugin-content[plugin="settings"] tr td:nth-child(2) {
		text-align: left;
	}
	
</style>
<h1>Settings</h1>
<table>
	<thead>
		<tr>
			<th colspan="2">Print</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Page size:</td>
			<td>
				<select setting="print_profile">
					<option value="a4">A4</option>
					<option value="usletter">US letter</option>
				</select>
			</td>
			<tr>
				<td>Print title page:</td>
				<td>
					<input setting="print_title_page" type="checkbox">
				</td>
			</tr>
			<tr>
				<td>Embolden scene headers:</td>
				<td>
					<input setting="embolden_scene_headers" type="checkbox">
				</td>
			</tr>
			<tr>
				<td>Double space between scenes:</td>
				<td>
					<input setting="double_space_between_scenes" type="checkbox">
				</td>
			</tr>
			<tr>
				<th colspan="2">Miscellaneous</th>
			</tr>
			<tr>
				<td>Load last opened on startup:</td>
				<td>
					<input setting="load_last_opened" type="checkbox">
				</td>
			</tr>
			<tr>
				<td>Show background image:</td>
				<td>
					<input setting="show_background_image" type="checkbox">
				</td>
			</tr>
	</tbody>
</table>
<p>
	<button id="settings-save">Save settings</button>
	<button id="settings-reset">Reset to defaults</button>
</p>
<script>
	require(['plugins/settings'], function(settings) {

		var data_to_components = function() {
			var c = settings.get_config();
			$('*[setting="show_background_image"]').prop('checked', c.show_background_image);
			$('*[setting="print_title_page"]').prop('checked', c.print_title_page);
			$('*[setting="embolden_scene_headers"]').prop('checked', c.embolden_scene_headers);
			$('*[setting="load_last_opened"]').prop('checked', c.load_last_opened);
			$('*[setting="double_space_between_scenes"]').prop('checked', c.double_space_between_scenes);
			$('*[setting="print_profile"]').val(c.print_profile);
		};

		var components_to_data = function() {
			var c = settings.get_config();
			c.show_background_image = $('*[setting="show_background_image"]').is(':checked');
			c.print_title_page = $('*[setting="print_title_page"]').is(':checked');
			c.embolden_scene_headers = $('*[setting="embolden_scene_headers"]').is(':checked');
			c.load_last_opened = $('*[setting="load_last_opened"]').is(':checked');
			c.double_space_between_scenes = $('*[setting="double_space_between_scenes"]').is(':checked');
			c.print_profile = $('*[setting="print_profile"]').val();
			settings.save();
		};

		$('#settings-reset').click(function() {
			settings.reset();
		});

		$('#settings-reset').click(function() {
			settings.reset();
			data_to_components();
		});

		$('#settings-save').click(function() {
			components_to_data();
		});

		settings.activate.add(function() {
			data_to_components();
		});

	});
</script>